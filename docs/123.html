<html>
<head>
<title>Continuous integration for LoopBack APIs | CircleCI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>环回API的持续集成| CircleCI</h1>
<blockquote>原文：<a href="https://circleci.com/blog/ci-for-loopback-apis/#2022-04-19T05:00:00-07:00">https://circleci.com/blog/ci-for-loopback-apis/#2022-04-19T05:00:00-07:00</a></blockquote><div><div class="post-content col-xs-12 col-md-10 col-lg-8">
        

        <blockquote>
  <p>本教程涵盖:</p>
  <ol>
    <li>环回入门</li>
    <li>创建问题模型和数据源</li>
    <li>环回API端点的自动化测试</li>
  </ol>
</blockquote>

<p>远程工作人才的激增(以及远程首次就业的广泛接受)使得全球协作达到了前所未有的规模。</p>

<p>这并非没有风险——尤其是在软件行业。在同一个代码库上工作的多个开发人员面临着无意中引入破坏性变更和中断应用程序的风险。在相同代码基础上工作的团队必须确保遵循最佳实践，以便每个人总是在同一页面上。否则会导致意外停机和损失。<a href="https://circleci.com/continuous-integration/">持续集成(CI) </a>是高绩效开发团队采用的最佳实践之一。CI是集成来自多个贡献者的变更以创建单个软件项目的可重复过程。</p>

<p>在本文中，我将使用CircleCI来展示如何将持续集成应用到一个<a href="https://loopback.io/" target="_blank" rel="noreferrer noopener">回送</a>项目中。LoopBack是一个高度可扩展的Node.js和TypeScript框架，用于构建API和微服务。</p>

<p>本教程是为环回应用建立CI/CD实践系列的第一篇。下一个教程将向您展示如何<a href="https://circleci.com/blog/automate-deploy-loopback/">自动化环回部署</a>。</p>

<p>对于这个项目，我们将建立一个测验应用程序的API。API将有端点来处理这些操作:</p>

<ol>
  <li>获取所有问题</li>
  <li>获取数据库中问题的总数</li>
  <li>获取具有指定ID的问题</li>
</ol>

<p>为了增加效果，API将<i>强烈地</i>拒绝删除问题的请求。</p>

<h2>先决条件</h2>

<ol>
  <li>在安装LoopBack之前，请确保下载并安装<a href="https://nodejs.org/en/download/" target="_blank" rel="noreferrer noopener">node . js</a>8.9 . x或更高版本。一个JavaScript运行时。</li>
  <li>如果尚未安装LoopBack 4 CLI，请安装它。</li>
</ol>

<blockquote><p>我们的教程是平台无关的，但是使用CircleCI作为例子。如果你没有CircleCI账号，请在 注册一个免费的<a href="https://circleci.com/signup/"> <strong>。</strong></a></p></blockquote>

<h2>入门指南</h2>

<p>LoopBack 4 CLI是一个命令行界面，可以搭建项目或扩展。CLI为遵循最佳实践的LoopBack 4项目提供了最快的入门方式。</p>

<pre><code>npm install -g @loopback/cli
</code></pre>
<p>使用以下命令创建一个新项目:</p>

<pre><code>lb4 app
</code></pre>

<pre><code>? Project name: quiz_api
? Project description: A simple API for a quiz application
? Project root directory: quiz_api
? Application class name: QuizApplication
? Select features to enable in the project Enable eslint, Enable prettier, Enable mocha, Enable loopbackBuild, Enable vscode, Enable docker,
 Enable repositories, Enable services
? Yarn is available. Do you prefer to use it by default? Yes
</code></pre>

<p><strong>注意</strong> : <i>如果LoopBack崩溃，无法创建应用程序，请确保您使用的是LTS版本的Node。Node的一些较新版本存在兼容性问题。</i></p>

<p>该项目附带了一个“ping”路由来测试项目。通过运行项目来尝试一下。导航到新创建的<code>quiz_api</code>目录，通过运行以下命令启动它:</p>

<pre><code>cd quiz_api

yarn start
</code></pre>

<p>在浏览器中，访问<code>http://127.0.0.1:3000/ping</code> <img src="../Images/8b17b784aac512e63938dbec0bbda17b.png" alt="Default Loopback ping page" srcset="https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=449 449w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=898 898w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1347 1347w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=720 720w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1440 1440w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=2160 2160w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=720 720w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1440 1440w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=2160 2160w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=779 779w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1558 1558w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=2337 2337w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=750 750w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1500 1500w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=2250 2250w" sizes="(min-width: 1200px) 750px,&#10;(min-width: 992px) 779px,&#10;(min-width: 768px) 720px,&#10;(min-width: 480px) 720px,&#10;(min-width: 0px) 449px" data-full-size-src="https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-1.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;fm=jpg" data-original-src="https://circleci.com/blog/media/2022-04-19-loopback-1.png"/></p>

<h2>配置CircleCI</h2>

<p>接下来，为CircleCI添加管道配置。在项目的根目录下，创建一个名为<code>.circleci</code>的文件夹，并在其中创建一个名为<code>config.yml</code>的文件。在新创建的文件中，添加以下配置:</p>

<pre><code>version: "2.1"

orbs:
  node: circleci/node@4.7.0

jobs:
  build-and-test:
    docker:
      - image: "cimg/base:stable"
    steps:
      - checkout
      - node/install:
          node-version: 16.0.0
          install-yarn: true
      - node/install-packages:
          pkg-manager: yarn
          cache-path: ~/project/node_modules
          override-ci-command: yarn install
      - run: yarn run test

workflows:
  main:
    jobs:
      - build-and-test
</code></pre>

<p>这个配置拉入Node.js orb: <code>circleci/node</code>。除此之外，这允许您在默认情况下启用缓存的情况下安装包。</p>

<p><strong>注意</strong> : <i>你应该安装了16的节点版本。在发布时，node 16是与LoopBack兼容的最新版本。</i></p>

<p>还指定了一个名为<code>build-and-test</code>的作业，它执行以下操作:</p>

<ol>
  <li>签出最新代码</li>
  <li>安装节点</li>
  <li>安装在<code>package.json</code>中声明的软件包</li>
  <li>运行项目中的测试</li>
</ol>

<p>最后，配置指定了运行<code>build-and-test</code>作业的工作流。</p>

<p>接下来，在GitHub上建立一个存储库，并将项目链接到CircleCI。看到这个帖子帮助<a href="https://circleci.com/blog/pushing-a-project-to-github/">把你的项目推到GitHub </a>。</p>

<p>登录您的CircleCI帐户。如果你注册了你的GitHub账户，你所有的库都会显示在你项目的仪表盘上。</p>

<p>在您的<code>quiz_api</code>项目旁边，点击<strong>设置项目</strong>。</p>

<p>CircleCI将检测项目中的<code>config.yml</code>文件。点击<strong>使用现有配置</strong>，然后<strong>开始建造</strong>。您的第一个工作流将成功运行！</p>

<p><img src="../Images/36a696f640b6f59cba6f8962c4f192ba.png" alt="CircleCi build page" srcset="https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=449 449w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=898 898w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1347 1347w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=720 720w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1440 1440w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=2160 2160w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=720 720w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1440 1440w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=2160 2160w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=779 779w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1558 1558w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=2337 2337w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=750 750w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1500 1500w,&#10;https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=2250 2250w" sizes="(min-width: 1200px) 750px,&#10;(min-width: 992px) 779px,&#10;(min-width: 768px) 720px,&#10;(min-width: 480px) 720px,&#10;(min-width: 0px) 449px" data-full-size-src="https://production-cci-com.imgix.net/blog/media/2022-04-19-loopback-2.png?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;fm=jpg" data-original-src="https://circleci.com/blog/media/2022-04-19-loopback-2.png"/></p>

<p>现在您已经有了一个管道，您可以添加API的问题特性了。</p>

<h2>构建问题模型</h2>

<p>对于本教程，问题将包含这些属性的字段:</p>

<ul>
  <li>困难</li>
  <li>问题</li>
  <li>回答正确</li>
</ul>

<p>创建问题时，默认情况下会分配一个唯一的主键。</p>

<p>您可以使用<code>lb4 model</code>命令并回答提示来生成模型。按<strong>键，输入属性名为空的</strong>，生成模型。请遵循以下步骤:</p>

<pre><code>lb4 model question
</code></pre>

<pre><code>? Please select the model base class Entity (A persisted model with an ID)
? Allow additional (free-form) properties? No
Model Question will be created in src/models/question.model.ts

Let's add a property to Question
Enter an empty property name when done

? Enter the property name: id
? Property type: number
? Is id the ID property? Yes
? Is id generated automatically? Yes

Let's add another property to Question
Enter an empty property name when done

? Enter the property name: difficulty
? Property type: string
? Is it required?: Yes

Let's add another property to Question
Enter an empty property name when done

? Enter the property name: question
? Property type: string
? Is it required?: Yes

Let's add another property to Question
Enter an empty property name when done

? Enter the property name: answer
? Property type: string
? Is it required?: Yes

Let's add another property to Question
Enter an empty property name when done

? Enter the property name:
</code></pre>

<p>将在<code>src/models/question.model.ts</code>创建一个新模型。</p>

<h2>构建数据源</h2>

<p>接下来，创建一个数据源来保存API的问题。对于本教程，使用内存数据库。使用以下命令创建数据源:</p>

<pre><code>lb4 datasource
</code></pre>

<p>回应如下所示的提示:</p>

<pre><code>? Datasource name: db
? Select the connector for db:  In-memory db (supported by StrongLoop)
? window.localStorage key to use for persistence (browser only):
? Full path to file for persistence (server only): ./data/db.json
</code></pre>

<p>接下来，在项目的根目录下创建一个名为<code>data</code>的文件夹。在<code>data</code>目录中，创建一个名为<code>db.json</code>的文件，并将其添加到:</p>

<pre><code>{
  "ids": {
    "Question": 9
  },
  "models": {
    "Question": {
      "1": "{\"difficulty\":\"medium\",\"question\":\"The HTML5 standard was published in 2014.\",\"answer\":\"True\",\"id\":1}",
      "2": "{\"difficulty\":\"medium\",\"question\":\"Which computer hardware device provides an interface for all other connected devices to communicate?\",\"answer\":\"Motherboard\",\"id\":2}",
      "3": "{\"difficulty\":\"medium\",\"question\":\"On which day did the World Wide Web go online?\",\"answer\":\"December 20, 1990\",\"id\":3}",
      "4": "{\"difficulty\":\"medium\",\"question\":\"Android versions are named in alphabetical order.\",\"answer\":\"True\",\"id\":4}",
      "5": "{\"difficulty\":\"medium\",\"question\":\"What was the first Android version specifically optimized for tablets?\",\"answer\":\"Honeycomb\",\"id\":5}",
      "6": "{\"difficulty\":\"medium\",\"question\":\"Which programming language shares its name with an island in Indonesia?\",\"answer\":\"Java\",\"id\":6}",
      "7": "{\"difficulty\":\"medium\",\"question\":\"What does RAID stand for?\",\"answer\":\"Redundant Array of Independent Disks\",\"id\":7}",
      "8": "{\"difficulty\":\"medium\",\"question\":\"Which of the following computer components can be built using only NAND gates?\",\"answer\":\"ALU\",\"id\":8}"
    }
  }
}
</code></pre>

<p>JSON文件的<code>ids</code>键让数据库知道分配新问题的下一个ID。在<code>models</code>部分，我们提供了每个型号的数据。还指定了<code>Question</code>模型和数据库中的基本问题。</p>

<h2>创建存储库</h2>

<p>对于本教程，您将使用存储库在数据库和问题模型之间提供一个抽象层。使用以下命令创建新的存储库:</p>

<pre><code>lb4 repository
</code></pre>

<p>回应如下所示的提示:</p>

<pre><code>? Please select the datasource DbDatasource
? Select the model(s) you want to generate a repository for Question
? Please select the repository base class DefaultCrudRepository (Juggler bridge)
</code></pre>

<p>新创建的类(位于<code>src/repositories/question.repository.ts</code>)拥有为您的模型执行CRUD操作所需的连接。</p>

<h2>创建控制器</h2>

<p>使用以下命令创建新的控制器:</p>

<pre><code>lb4 controller
</code></pre>

<p>响应CLI提示，如下所示:</p>

<pre><code>? Controller class name: question
Controller Question will be created in src/controllers/question.controller.ts

? What kind of controller would you like to generate? REST Controller with CRUD functions
? What is the name of the model to use with this CRUD repository? Question
? What is the name of your CRUD repository? QuestionRepository
? What is the name of ID property? id
? What is the type of your ID? number
? Is the id omitted when creating a new instance? Yes
? What is the base HTTP path name of the CRUD operations? /questions
</code></pre>

<p>CLI创建一个能够处理所有CRUD操作的控制器。但是，此时您只需要这些操作的一个子集。打开位于<code>src/controllers/question.controller.ts</code>的问题控制器，并对其进行编辑以匹配以下代码:</p>

<pre><code>import {
  Count,
  CountSchema,
  Filter,
  FilterExcludingWhere,
  repository,
  Where,
} from '@loopback/repository';
import {
  del,
  get,
  getModelSchemaRef,
  HttpErrors,
  param,
  response,
} from '@loopback/rest';
import {Question} from '../models';
import {QuestionRepository} from '../repositories';

export class QuestionController {
  constructor(
    @repository(QuestionRepository)
    public questionRepository: QuestionRepository,
  ) {}

  @get('/questions/count')
  @response(200, {
    description: 'Question model count',
    content: {'application/json': {schema: CountSchema}},
  })
  async count(@param.where(Question) where?: Where&lt;Question&gt;): Promise&lt;Count&gt; {
    return this.questionRepository.count(where);
  }

  @get('/questions')
  @response(200, {
    description: 'Array of Question model instances',
    content: {
      'application/json': {
        schema: {
          type: 'array',
          items: getModelSchemaRef(Question, {includeRelations: true}),
        },
      },
    },
  })
  async find(
    @param.filter(Question) filter?: Filter&lt;Question&gt;,
  ): Promise&lt;Question[]&gt; {
    return this.questionRepository.find(filter);
  }

  @get('/questions/{id}')
  @response(200, {
    description: 'Question model instance',
    content: {
      'application/json': {
        schema: getModelSchemaRef(Question, {includeRelations: true}),
      },
    },
  })
  async findById(
    @param.path.number('id') id: number,
    @param.filter(Question, {exclude: 'where'})
    filter?: FilterExcludingWhere&lt;Question&gt;,
  ): Promise&lt;Question&gt; {
    return this.questionRepository.findById(id, filter);
  }

  @del('/questions/{id}')
  @response(403, {
    description: 'Question DELETE not permitted',
  })
  async deleteById(@param.path.number('id') id: number): Promise&lt;void&gt; {
    throw new HttpErrors.Forbidden('Question DELETE not permitted');
  }
}
</code></pre>

<h2>为端点添加测试</h2>

<p>最后一步是添加验收测试套件，以确保您的问题控制器按预期工作。在<code>src/__**tests__**/acceptance</code>文件夹中，创建一个名为<code>question.controller.acceptance.ts</code>的新文件，并将以下代码添加到其中:</p>

<pre><code>import { Client, expect } from "@loopback/testlab";
import { QuizApplication } from "../..";
import { setupApplication } from "./test-helper";

describe("QuestionController", () =&gt; {
  let app: QuizApplication;
  let client: Client;

  before("setupApplication", async () =&gt; {
    ({ app, client } = await setupApplication());
  });

  after(async () =&gt; {
    await app.stop();
  });

  it("successfully makes GET request to /questions", async () =&gt; {
    const res = await client.get("/questions").expect(200);
    expect(res.body).to.be.an.Array();
    expect(res.body).to.have.length(8);
  });

  it("successfully makes GET request to /questions/count", async () =&gt; {
    const res = await client.get("/questions/count").expect(200);
    expect(res.body).to.be.an.Object();
    expect(res.body.count).to.equal(8);
  });

  it("successfully makes GET request to /questions/{id}", async () =&gt; {
    const res = await client.get("/questions/2").expect(200);
    expect(res.body).containEql({ id: 2, difficulty: 'medium', answer: 'Motherboard', });
  });

  it("makes DELETE request to /questions which fails", async () =&gt; {
    await client.delete("/questions/5").expect(403);
  });
});
</code></pre>

<p>在运行测试之前，花一点时间做一些整理工作。使用以下命令Lint您的代码并修复任何问题:</p>

<pre><code>yarn run lint:fix
</code></pre>

<p>提交您的代码并在本地运行测试，以确保一切正常。使用此命令:</p>

<pre><code>yarn test
</code></pre>

<p>将最新的更改推送到您的GitHub库。这会触发CircleCI <code>build-and-test</code>作业，该作业会像之前一样成功运行。干得好！</p>

<h2>结论</h2>

<p>在本文中，我们研究了如何使用LoopBack构建API。我们还建立了一个CircleCI管道来管理项目的持续集成。</p>

<p>这种方法的好处是人为错误不会危及我们应用程序的安全性。通过自动化测试过程，您消除了人为错误对生产环境造成意外破坏的风险。它还为维护的软件增加了额外的质量控制和保证。尝试持续集成，让代码瓶颈成为团队的过去。</p>

<p>本教程的全部代码可以在GitHub上找到。</p>

<hr/>

<p><a href="https://twitter.com/yemiwebby" target="_blank" rel="noreferrer noopener"> Oluyemi </a>是一名拥有电信工程背景的技术爱好者。出于对解决用户日常遇到的问题的浓厚兴趣，他冒险进入编程领域，并从那时起将他解决问题的技能用于构建web和移动软件。Oluyemi是一名热衷于分享知识的全栈软件工程师，他在世界各地的几个博客上发表了大量技术文章和博客文章。由于精通技术，他的爱好包括尝试新的编程语言和框架。</p>


        
          
          
            <hr/>
            <p>Oluyemi是一名拥有电信工程背景的技术爱好者。出于对解决用户日常遇到的问题的浓厚兴趣，他冒险进入编程领域，并从那时起将他的问题解决技能用于构建web和移动软件。Oluyemi是一名热衷于分享知识的全栈软件工程师，他在世界各地的几个博客上发表了大量技术文章和博客文章。作为技术专家，他的爱好包括尝试新的编程语言和框架。</p>

            <p><a href="/blog/author/olususi-oluyemi/" class="arrow-link">阅读更多Olususi Oluyemi的帖子</a></p>
          
        
      </div>
    </div>    
</body>
</html>