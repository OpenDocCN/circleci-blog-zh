<html>
<head>
<title>It’s The Future - Heroku Docker | CircleCI - docker vs rocket, docker heroku, heroku vs docke</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>它是未来-英雄库坞|圆形坞站vs火箭，英雄库坞站vs坞站</h1>
<blockquote>原文：<a href="https://circleci.com/blog/its-the-future/#2015-06-09T12:37:41-07:00">https://circleci.com/blog/its-the-future/#2015-06-09T12:37:41-07:00</a></blockquote><div><div class="post-content col-xs-12 col-md-10 col-lg-8">
        

        <p><img src="../Images/9ace8bccaffa4f9af3fb64586f8d3967.png" alt="rabbit_hole" srcset="https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=449 449w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=898 898w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1347 1347w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=720 720w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1440 1440w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=2160 2160w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=720 720w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1440 1440w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=2160 2160w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=779 779w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1558 1558w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=2337 2337w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=750 750w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=1500 1500w,&#10;https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;w=2250 2250w" sizes="(min-width: 1200px) 750px,&#10;(min-width: 992px) 779px,&#10;(min-width: 768px) 720px,&#10;(min-width: 480px) 720px,&#10;(min-width: 0px) 449px" data-full-size-src="https://production-cci-com.imgix.net/blog/media/2015-06-09_rabbit_hole.jpg?ixlib=rb-3.2.1&amp;auto=format&amp;fit=max&amp;q=60&amp;ch=DPR%2CWidth%2CViewport-Width%2CSave-Data&amp;fm=jpg" data-original-src="https://circleci.com/blog/media/2015-06-09_rabbit_hole.jpg"/></p>

<p>嘿，我的老板说要和你谈谈-我听说你对网络应用很了解？</p>

<p>是的，我现在更喜欢分布式系统。我刚从ContainerCamp和Gluecon回来，下周要去Dockercon。对行业的发展方式感到非常兴奋——让一切变得更简单、更可靠。是未来！</p>



<p>酷毙了。我目前只是在构建一个简单的web应用程序——一个使用Rails的普通CRUD应用程序，将部署到Heroku。那还是要走的路吗？</p>

<p>哦，不。那是老方法了。Heroku死了，没人再用它了。你现在需要使用Docker。这是未来。</p>

<p>哦，好吧。那是什么？</p>

<p>码头工人是这种新的集装箱运输方式。它就像LXC，但它也是一种打包格式，一个分发平台，以及让分布式系统变得非常简单的工具。</p>

<p>集装箱里..—现在怎么办？LXE是什么？</p>

<p>我是LXC。这就像类固醇激素！</p>

<p>cher-oot是什么？</p>

<p>好吧，看。码头工人。集装箱化。这是未来。这就像虚拟化，但是更快更便宜。</p>

<p>哦，就像流浪汉一样。</p>

<p>不，流浪者已经死了。现在一切都将集装箱化，这是未来。</p>

<p>好的，那么我不需要了解任何关于虚拟化的知识？</p>

<p>不，你仍然需要虚拟化，因为容器还不能提供完整的安全故事。所以如果你想在多租户环境中运行任何东西，你需要确保你不能逃离沙箱。</p>

<p>好吧，我有点迷路了。我们来备份一下。所以有一种类似虚拟化的东西，叫做容器。我可以用这个对付Heroku？</p>

<p>嗯，赫罗库有些支持多克，但是我告诉过你:赫罗库已经死了。你想在CoreOS上运行你的容器。</p>

<p>好吧，那是什么？</p>

<p>这个很酷的主机操作系统可以和Docker一起使用。见鬼，你甚至不需要Docker，你可以使用rkt。</p>

<p>火箭？</p>

<p>不，rkt。</p>

<p>好的，火箭。</p>

<p><em>-不，现在叫rkt。完全不同。这是一种替代的容器化格式，不像Docker那样捆绑在一起，因此更具可组合性。</em></p>

<p>这样好吗？</p>

<p>当然是好的。可组合性是未来。</p>

<p>好的，你如何使用它？</p>

<p>我不知道。我觉得没人用。</p>

<p>叹气。你刚才说了些关于科瑞奥斯的事？</p>

<p>是的，所以这是你和Docker一起使用的主机操作系统。</p>

<p>什么是主机操作系统？</p>

<p>一个主机操作系统运行你所有的容器。</p>

<p>管理我的集装箱？</p>

<p>是的，你得有东西来管理你的集装箱。因此，您可以像设置EC2实例一样，将CoreOS放在上面，然后运行Docker守护进程，然后可以将Docker映像部署到它上面。</p>

<p>那是容器的哪一部分？</p>

<p>所有的一切。看，你拿着你的应用，写一个Docker文件，在本地把它变成一个图像，然后你可以把它推送到任何Docker主机。</p>

<p>啊，就像赫罗库？</p>

<p>不，不是Heroku。我告诉过你。赫罗库死了。你现在使用Docker运行你自己的云。</p>

<p>什么？</p>

<p>是的，这很简单。查一下#gifee。</p>

<p>吉菲？</p>

<p><em>——“谷歌为其他所有人打造的基础设施”。你可以使用容器从现成的工具和堆栈中取出一些，你可以拥有和Google一样的基础设施。</em></p>

<p>我为什么不用谷歌的东西呢？</p>

<p>你认为这种情况会在6个月后出现吗？</p>

<p>好吧，难道没有其他人做这些东西的主机吗？我真的不想托管自己的东西。</p>

<p>嗯，亚马逊有ECS，但是你必须写XML或者其他东西。</p>

<p>OpenStack上的东西呢？</p>

<p>恶心。</p>

<p>Ew？</p>

<p><em>-恶。</em></p>

<p>听着，我真的不想托管我自己的东西。</p>

<p>不，这真的很简单。您刚刚建立了一个Kubernetes集群。</p>

<p>我需要一个集群？</p>

<p><em> -Kubernetes星团。它将管理您所有服务的部署。</em></p>

<p>我只有一项服务。</p>

<p>你是什么意思？你有一个应用程序的权利，所以你至少有8-12个服务？</p>

<p>什么？没有，就一个app。服务什么的。只是其中之一。</p>

<p>不，看看微服务。这是未来。这是我们现在做任何事情的方式。你把你的单片应用程序分成12个服务。你做的每一项工作都有一个。</p>

<p>这似乎太过分了。</p>

<p>这是确保它可靠的唯一方法。因此，如果您的认证服务出现故障… </p>

<p>认证服务？我正要用这块我以前用过几次的宝石。</p>

<p>太好了。使用宝石。把它放到它自己的项目里。在上面放一个RESTful API。然后，您的其他服务使用该API，并优雅地处理失败等问题。把它放在一个容器里，然后不断地把它送出去。</p>

<p>好了，现在我已经有了几十个无法管理的服务，接下来呢？</p>

<p>是的，我说的是Kubernetes。让您能够协调所有服务。</p>

<p>策划他们？</p>

<p>是的，所以你有这些服务，它们必须可靠，所以你需要它们的多个副本。因此，Kubernetes会确保您有足够的资源，并且这些资源分布在您的机群中的多个主机上，因此它总是可用的。</p>

<p>我现在需要一支舰队？</p>

<p>是的，为了可靠性。但是Kubernetes为你管理它。你知道Kubernetes的作品，因为谷歌建立了它，它运行在etcd上。</p>

<p>什么是etcd？</p>

<p>这是RAFT的一个实现。</p>

<p>好吧，那么木筏是什么？</p>

<p>就像帕克斯一样。</p>

<p>天啊，我们要去多深的兔子洞？我只想推出一个应用程序。叹气。他妈的，好吧，深呼吸。上帝啊。好吧，Paxos是什么？</p>

<p>Paxos就像是70年代的分布式共识协议，没有人理解或使用。</p>

<p>太好了，谢谢你告诉我这件事。筏子是什么？</p>

<p><em>-因为没人了解帕克斯，这个家伙迭戈… </em></p>

<p>哦，你认识他？</p>

<p>不，他在CoreOS工作。不管怎样，迭戈为他的博士论文造了一个筏子，因为帕克斯太难了。聪明绝顶的家伙。然后他写了etcd作为实现，Aphyr说不是屎。</p>

<p>Aphyr是什么？</p>

<p>Aphyr是那个写了“也许打电话给我”的人你知道，分布式系统和BDSM家伙？</p>

<p>什么？你是说BDSM吗？</p>

<p>是的，BDSM。这是旧金山。每个人都喜欢分布式系统和BDSM。</p>

<p>呃，好吧。他写了凯蒂·佩里的歌？</p>

<p>不，他写了一系列关于每个数据库如何失败的博文。</p>

<p>CAP是什么？</p>

<p><em>——上限定理。它说一致性、可用性和分区容忍度三者只能取其二。</em></p>

<p>好的，所有数据库都失败了吗？这到底是什么意思？</p>

<p>意思是他们是狗屎。比如Mongo。</p>

<p>我以为Mongo是网络规模的？</p>

<p>其他人都没有。</p>

<p>好吧，那么等等？</p>

<p>是的，etcd是一个分布式键值存储。</p>

<p>哦，就像里兹。</p>

<p>不，一点也不像雷迪斯。etcd分布式。如果网络分区，Redis会丢失一半的写入数据。</p>

<p>好了，这是一个<em>分布式</em>键值存储。这为什么有用？</p>

<p><em> -Kubernetes使用etcd作为消息总线建立一个标准的5节点集群。它与Kubernetes自己的一些服务相结合，提供了一个非常有弹性的编排系统。</em></p>

<p>5个节点？我有一个应用程序。所有这些我需要多少台机器？</p>

<p>嗯，你将有大约12个服务，当然你需要每个服务的一些冗余拷贝，一些负载平衡器，etcd集群，你的数据库，和kubernetes集群。大概有50个流动集装箱。</p>

<p>WTF！</p>

<p>没什么大不了的！容器真的很高效，所以你应该能够把它们分布在8台机器上！是不是很神奇？</p>

<p>这是一种说法。有了这些，我就可以简单地部署我的应用程序了？</p>

<p>当然可以。我的意思是，对于Docker和Kubernetes来说，存储仍然是一个开放的问题，联网需要一些工作，但你基本上已经做到了！</p>

<p>我明白了。好的，我想我明白了。</p>

<p>太好了！</p>

<p>谢谢你的解释。</p>

<p>没问题。</p>

<p>让我重复一遍，看看我是否理解对了。</p>

<p>当然可以！</p>

<p>因此，我只需要将我的简单CRUD应用程序分成12个微服务，每个微服务都有自己的API，这些API调用彼此的API，但可以灵活地处理故障，将它们放入Docker容器中，启动一个由8台运行CoreOS的Docker主机组成的机群，使用一个运行etcd的小型Kubernetes集群对它们进行“编排”，找出网络和存储的“未决问题”，然后我不断向我的机群提供每个微服务的多个冗余副本。就这样吗？</p>

<p>是的！是不是很光荣？</p>

<p>我要回赫罗库。</p>

<p><strong> <em>想用Docker，源源不断的送那狗屁？查看<a href="https://circleci.com/docker/"> CircleCI的码头支持</a>。</em> </strong></p>

<p><strong> <em>想动作快又不坏东西？<a href="https://circleci.com/signup/">免费注册</a>软件团队喜欢使用的现代持续集成和交付平台。</em> </strong></p>

<p><strong> <em>你的防火墙后面需要牛逼的CI/CD？<a href="mailto:enterprise@circleci.com">给我们留言</a>或注册CircleCI企业的<a href="https://circleci.com/enterprise/">30天免费试用。</a></em> </strong></p>

<p><em> <a href="/blog/it-really-is-the-future/">我们的后续。</a>T3】</em></p>


        
          
          
        
      </div>
    </div>    
</body>
</html>