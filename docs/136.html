<html>
<head>
<title>CircleCI and Snapcraft: Everything You Need to Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>CircleCI和Snapcraft:你需要知道的一切</h1>
<blockquote>原文：<a href="https://circleci.com/blog/circleci-and-snapcraft/#2018-03-16T03:00:00-07:00">https://circleci.com/blog/circleci-and-snapcraft/#2018-03-16T03:00:00-07:00</a></blockquote><div><div class="post-content col-xs-12 col-md-10 col-lg-8">
        

        <p>软件包管理系统Snapcraft 在Linux平台上为自己的位置而战，它重新想象了你如何交付你的软件。一组新的跨发行版工具可以帮助您构建和发布“快照”。我们将介绍如何使用CircleCI 2.0来支持这个过程，以及在这个过程中可能遇到的一些问题。</p>



<h2>什么是快照包？还有Snapcraft？</h2>

<p><strong>快照</strong>是Linux发行版的软件包。它们的设计吸取了在Android以及物联网设备等移动平台上交付软件的经验教训。<strong> Snapcraft </strong>是一个包含快照和构建快照的命令行工具的名称，<a href="https://snapcraft.io">是一个网站</a>，几乎是围绕实现这一点的技术的整个生态系统。</p>

<p>Snap包旨在隔离和封装整个应用程序。这一概念实现了Snapcraft提高软件安全性、稳定性和可移植性的目标，允许单个“snap”不仅可以安装在多个版本的Ubuntu上，还可以安装在Debian、Fedora、Arch等版本上。根据Snapcraft的网站:</p>

<blockquote>
  <p>为每个Linux桌面、服务器、云或设备打包任何应用程序，并直接提供更新。</p>
</blockquote>

<h2>资源</h2>

<h3>CircleCI上的建筑快照</h3>

<p>Snap包可以在CircleCI上快速无缝地构建。我们有一个关于如何在CircleCI <a href="https://circleci.com/docs/build-publish-snap-packages/">这里</a>构建snap包的文档。Snapcraft自己的<a href="https://docs.snapcraft.io">文档网站</a>也是一个有价值的资源。</p>

<h3>Docker图像</h3>

<p>Snapcraft CLI <code>snapcraft</code>在Ubuntu中运行得非常好。然而，如果你试图在其他发行版中构建快照，可能会涉及更多的工作。本着与snap本身类似的精神，Snapcraft团队创建了Docker映像，允许构建snap包，而不管Linux发行版(也包括macOS和Windows)。这意味着您可以在Debian或Fedora上本地构建快照，或者在Ubuntu上构建完全干净的环境，与文件系统的其余部分分离。</p>

<p>我已经基于官方的Snapcraft映像创建了一组第二方的Docker映像，这些映像旨在在CircleCI等持续集成(CI)环境中很好地工作。两个Docker图片都可以在下面找到。</p>

<p>Snapcraft Docker图像:</p>


<h3>CircleCI本地CLI</h3>

<p><a href="https://circleci.com/docs/local-cli/"> CircleCI Local CLI </a>是一个省时的工具，允许您在本地运行CI构建，就在您自己的机器上。这是最有用的替代方法，可以替代<a href="https://circleci.com/docs/ssh-access-jobs/">进入构建</a>进行故障排除。另一个成功的特性是在提交和推送到GitHub之前验证CircleCI配置文件的能力。再也不会因为您不小心在<code>.circleci/config.yml</code>中留下了一个“标签”而收到一封关于构建失败的电子邮件。</p>

<p>使用CircleCI文档中描述的构建过程，本地CLI现在被打包成一个snap包，可以通过<a href="https://snapcraft.io/store"> Snap Store </a>立即获得。安装说明可以在<a href="https://circleci.com/docs/local-cli/#ubuntu-1604-fedora-27-and-other-distros-supporting-snap-packages">这里</a>找到，但是它的要点是，对于Ubuntu 16.04+用户:</p>

<pre><code>sudo snap install docker circleci
sudo snap connect circleci:docker docker
</code></pre>

<h2>包管理和开源</h2>

<p>你的团队计划使用其他工具打包软件吗？有没有您希望看到的开源流程和工作流？如果你想看到更多关于这些话题的博客帖子和文档，请在<a href="https://discuss.circleci.com"> CircleCI讨论</a>中告诉我们，或者甚至在Twitter上给我喊一声:<a href="https://twitter.com/FelicianoTech"> @FelicianoTech </a>。</p>



        
          
          
        
      </div>
    </div>    
</body>
</html>